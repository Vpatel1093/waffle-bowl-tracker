<!-- Head-to-Head Matchup Component -->
{% if matchup and team1_roster and team2_roster %}
    <div class="space-y-2">
        <!-- Matchup Header -->
        <div class="border-b pb-2">
            <h4 class="text-base sm:text-xl font-bold text-gray-900 text-center mb-1">
                {{ matchup.round_name }} - Week {{ matchup.week }}
            </h4>
            <div class="flex items-center justify-center gap-2 mb-1">
                <span class="font-semibold text-gray-900 text-sm">{{ team1_roster.name }}</span>
                <span class="text-gray-500 text-xs">vs</span>
                <span class="font-semibold text-gray-900 text-sm">{{ team2_roster.name }}</span>
            </div>
            <div class="text-center">
                {% if matchup.game_status == 'final' %}
                <span class="px-2 py-0.5 bg-amber-100 text-amber-800 text-xs font-semibold rounded-full">
                    Final
                </span>
                {% elif matchup.game_status == 'live' %}
                <span class="px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs font-semibold rounded-full">
                    Live
                </span>
                {% else %}
                <span class="px-2 py-0.5 bg-gray-100 text-gray-800 text-xs font-semibold rounded-full">
                    Upcoming
                </span>
                {% endif %}
            </div>
        </div>

        <!-- Score Summary -->
        <div class="grid grid-cols-2 gap-2">
            <div class="bg-gray-50 rounded-lg p-2 text-center">
                <div class="text-xs text-gray-500 truncate">{{ team1_roster.name }}</div>
                <div class="text-xl sm:text-2xl font-bold text-gray-900">
                    {{ "%.1f"|format(matchup.team1_points) }}
                </div>
            </div>
            <div class="bg-gray-50 rounded-lg p-2 text-center">
                <div class="text-xs text-gray-500 truncate">{{ team2_roster.name }}</div>
                <div class="text-xl sm:text-2xl font-bold text-gray-900">
                    {{ "%.1f"|format(matchup.team2_points) }}
                </div>
            </div>
        </div>

        <!-- Side-by-Side Rosters -->
        <div>
            <h5 class="font-semibold text-gray-900 mb-2 text-sm">Roster Comparison</h5>
            <div class="max-h-96 overflow-y-auto overflow-x-hidden">
                <table class="w-full divide-y divide-gray-200 text-xs">
                    <thead class="bg-gray-50 sticky top-0">
                        <tr>
                            <th class="px-1 py-1.5 text-left text-xs font-medium text-gray-500 uppercase w-12">Pos</th>
                            <th class="px-1 py-1.5 text-left text-xs font-medium text-gray-500 uppercase">{{ team1_roster.name[:10] }}</th>
                            <th class="px-1 py-1.5 text-right text-xs font-medium text-gray-500 uppercase w-10">Pts</th>
                            <th class="px-1 py-1.5 text-left text-xs font-medium text-gray-500 uppercase">{{ team2_roster.name[:10] }}</th>
                            <th class="px-1 py-1.5 text-right text-xs font-medium text-gray-500 uppercase w-10">Pts</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        {% set max_players = team1_roster.players|length if team1_roster.players|length > team2_roster.players|length else team2_roster.players|length %}
                        {% for i in range(max_players) %}
                            {% set p1 = team1_roster.players[i] if i < team1_roster.players|length else none %}
                            {% set p2 = team2_roster.players[i] if i < team2_roster.players|length else none %}

                            <tr class="{% if p1 and p1.selected_position != 'BN' %}{% if matchup.game_status == 'final' %}bg-amber-50{% elif matchup.game_status == 'live' %}bg-yellow-50{% endif %}{% endif %}">
                                <!-- Slot -->
                                <td class="px-1 py-1">
                                    {% if p1 %}
                                        <span class="px-1.5 py-0.5 {% if p1.selected_position != 'BN' %}{% if matchup.game_status == 'final' %}bg-amber-200 text-amber-900{% elif matchup.game_status == 'live' %}bg-yellow-200 text-yellow-900{% else %}bg-gray-300 text-gray-800{% endif %}{% else %}bg-gray-200 text-gray-700{% endif %} rounded text-xs font-semibold whitespace-nowrap">
                                            {{ p1.selected_position }}
                                        </span>
                                    {% endif %}
                                </td>

                                <!-- Team 1 Player -->
                                <td class="px-1 py-1">
                                    {% if p1 %}
                                        <div class="font-medium text-gray-900 truncate leading-tight">{{ p1.name }}</div>
                                        <div class="text-xs text-gray-500 leading-tight">{{ p1.team }} - {{ p1.position }}</div>
                                    {% endif %}
                                </td>

                                <!-- Team 1 Points -->
                                <td class="px-1 py-1 text-right font-semibold {% if matchup.game_status == 'final' %}text-amber-700{% elif matchup.game_status == 'live' %}text-yellow-700{% else %}text-gray-900{% endif %}">
                                    {% if p1 %}{{ "%.1f"|format(p1.points) }}{% endif %}
                                </td>

                                <!-- Team 2 Player -->
                                <td class="px-1 py-1">
                                    {% if p2 %}
                                        <div class="font-medium text-gray-900 truncate leading-tight">{{ p2.name }}</div>
                                        <div class="text-xs text-gray-500 leading-tight">{{ p2.team }} - {{ p2.position }}</div>
                                    {% endif %}
                                </td>

                                <!-- Team 2 Points -->
                                <td class="px-1 py-1 text-right font-semibold {% if matchup.game_status == 'final' %}text-amber-700{% elif matchup.game_status == 'live' %}text-yellow-700{% else %}text-gray-900{% endif %}">
                                    {% if p2 %}{{ "%.1f"|format(p2.points) }}{% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                    <tfoot class="bg-gray-50 font-bold text-sm">
                        <tr>
                            <td class="px-1 py-1.5">Total</td>
                            <td class="px-1 py-1.5"></td>
                            <td class="px-1 py-1.5 text-right {% if matchup.game_status == 'final' %}text-amber-700{% elif matchup.game_status == 'live' %}text-yellow-700{% else %}text-gray-900{% endif %}">
                                {{ "%.1f"|format(matchup.team1_points) }}
                            </td>
                            <td class="px-1 py-1.5"></td>
                            <td class="px-1 py-1.5 text-right {% if matchup.game_status == 'final' %}text-amber-700{% elif matchup.game_status == 'live' %}text-yellow-700{% else %}text-gray-900{% endif %}">
                                {{ "%.1f"|format(matchup.team2_points) }}
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>

            <!-- Legend -->
            <div class="flex justify-end gap-3 mt-1.5 text-xs text-gray-600">
                {% if matchup.game_status == 'final' %}
                <div class="flex items-center gap-1">
                    <div class="w-3 h-3 bg-amber-200 rounded"></div>
                    <span>Final</span>
                </div>
                {% elif matchup.game_status == 'live' %}
                <div class="flex items-center gap-1">
                    <div class="w-3 h-3 bg-yellow-200 rounded"></div>
                    <span>Live</span>
                </div>
                {% else %}
                <div class="flex items-center gap-1">
                    <div class="w-3 h-3 bg-gray-300 rounded"></div>
                    <span>Upcoming</span>
                </div>
                {% endif %}
                <div class="flex items-center gap-1">
                    <div class="w-3 h-3 bg-gray-200 rounded"></div>
                    <span>Bench</span>
                </div>
            </div>
        </div>
    </div>
{% else %}
    <div class="text-center py-8">
        <p class="text-gray-600">Failed to load matchup details.</p>
    </div>
{% endif %}
