<!-- Head-to-Head Matchup Component -->
{% if matchup and team1_roster and team2_roster %}
    <div class="space-y-2">
        <!-- Header with Status -->
        <div class="border-b pb-2">
            <div class="flex items-center justify-between mb-2">
                <h4 class="text-lg font-bold text-gray-900">{{ matchup.round_name }} - Week {{ matchup.week }}</h4>
                {% if matchup.game_status == 'final' %}
                <span class="px-2 py-0.5 bg-amber-100 text-amber-800 text-xs font-semibold rounded-full">Final</span>
                {% elif matchup.game_status == 'live' %}
                <span class="px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs font-semibold rounded-full animate-pulse">‚óè In Progress</span>
                {% else %}
                <span class="px-2 py-0.5 bg-gray-100 text-gray-800 text-xs font-semibold rounded-full">Upcoming</span>
                {% endif %}
            </div>

            <div class="flex items-center justify-center gap-4">
                <div class="text-center">
                    <div class="font-semibold text-gray-900 text-sm">{{ team1_roster.name }}</div>
                    <div class="text-xs text-gray-500">
                        <span class="font-bold text-lg {% if matchup.game_status == 'final' %}text-amber-700{% elif matchup.game_status == 'live' %}text-yellow-700{% else %}text-gray-900{% endif %}">{{ "%.1f"|format(matchup.team1_points) }}</span>
                    </div>
                </div>

                <div class="text-xs text-gray-500">vs</div>

                <div class="text-center">
                    <div class="font-semibold text-gray-900 text-sm">{{ team2_roster.name }}</div>
                    <div class="text-xs text-gray-500">
                        <span class="font-bold text-lg {% if matchup.game_status == 'final' %}text-amber-700{% elif matchup.game_status == 'live' %}text-yellow-700{% else %}text-gray-900{% endif %}">{{ "%.1f"|format(matchup.team2_points) }}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Roster Table -->
        <div>
            <h5 class="font-semibold text-gray-900 mb-2 text-sm">Roster Comparison</h5>
            <div class="max-h-96 overflow-y-auto overflow-x-hidden">
                <table class="w-full text-xs">
                    <thead class="bg-gray-50 sticky top-0 border-b border-gray-200">
                        <tr>
                            <th class="px-1 py-2 text-left font-medium text-gray-600 uppercase w-10">Pos</th>
                            <th class="px-1 py-2 text-left font-medium text-gray-600 uppercase">Player</th>
                            <th class="px-1 py-2 text-right font-medium text-gray-600 uppercase w-16">Pts</th>
                            <th class="px-1 py-2 text-left font-medium text-gray-600 uppercase">Player</th>
                            <th class="px-1 py-2 text-right font-medium text-gray-600 uppercase w-16">Pts</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-100">
                        {% for i in range(team1_roster.players|length) %}
                            {% set p1 = team1_roster.players[i] %}
                            {% set p2 = team2_roster.players[i] if i < team2_roster.players|length else none %}

                            <tr class="{% if p1.selected_position != 'BN' %}{% if matchup.game_status == 'final' %}bg-amber-50{% elif matchup.game_status == 'live' %}bg-yellow-50{% endif %}{% endif %} hover:bg-gray-100">
                                <!-- Position -->
                                <td class="px-1 py-2">
                                    <span class="px-1.5 py-0.5 {% if p1.selected_position != 'BN' %}{% if matchup.game_status == 'final' %}bg-amber-200 text-amber-900{% elif matchup.game_status == 'live' %}bg-yellow-200 text-yellow-900{% else %}bg-gray-300 text-gray-800{% endif %}{% else %}bg-gray-200 text-gray-600{% endif %} rounded text-xs font-bold">
                                        {{ p1.selected_position }}
                                    </span>
                                </td>

                                <!-- Team 1 Player -->
                                <td class="px-1 py-1">
                                    {% if p1 %}
                                        <div class="font-medium text-gray-900 truncate leading-tight">{{ p1.name }}</div>
                                        <div class="text-xs text-gray-500 leading-tight">
                                            {{ p1.team }} - {{ p1.position }}{% if p1.opponent and p1.opponent != '---' %} @{{ p1.opponent }}{% endif %}{% if p1.game_clock %} <span class="font-bold text-red-600">{{ p1.game_clock }}</span>{% endif %}
                                        </div>
                                    {% endif %}
                                </td>

                                <!-- Team 1 Points -->
                                <td class="px-1 py-1 text-right">
                                    {% if p1 %}
                                        <div class="text-sm text-gray-900">{{ "%.1f"|format(p1.points) if p1.points is not none else '' }}</div>
                                    {% endif %}
                                </td>

                                <!-- Team 2 Player -->
                                <td class="px-1 py-1">
                                    {% if p2 %}
                                        <div class="font-medium text-gray-900 truncate leading-tight">{{ p2.name }}</div>
                                        <div class="text-xs text-gray-500 leading-tight">
                                            {{ p2.team }} - {{ p2.position }}{% if p2.opponent and p2.opponent != '---' %} @{{ p2.opponent }}{% endif %}{% if p2.game_clock %} <span class="font-bold text-red-600">{{ p2.game_clock }}</span>{% endif %}
                                        </div>
                                    {% endif %}
                                </td>

                                <!-- Team 2 Points -->
                                <td class="px-1 py-1 text-right">
                                    {% if p2 %}
                                        <div class="text-sm text-gray-900">{{ "%.1f"|format(p2.points) if p2.points is not none else '' }}</div>
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                    <tfoot class="bg-gray-100 border-t-2 border-gray-300">
                        <tr class="font-bold">
                            <td class="px-1 py-2">TOTAL</td>
                            <td class="px-1 py-2"></td>
                            <td class="px-1 py-2 text-right text-lg {% if matchup.game_status == 'final' %}text-amber-700{% elif matchup.game_status == 'live' %}text-yellow-700{% else %}text-gray-900{% endif %}">
                                {{ "%.1f"|format(matchup.team1_points) }}
                            </td>
                            <td class="px-1 py-2 border-l-2 border-gray-300"></td>
                            <td class="px-1 py-2 text-right text-lg {% if matchup.game_status == 'final' %}text-amber-700{% elif matchup.game_status == 'live' %}text-yellow-700{% else %}text-gray-900{% endif %}">
                                {{ "%.1f"|format(matchup.team2_points) }}
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
{% else %}
    <div class="text-center py-8">
        <p class="text-gray-600">Failed to load matchup details.</p>
    </div>
{% endif %}
